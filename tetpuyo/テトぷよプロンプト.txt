テトリスとぷよぷよをミックスさせた、ブラウザでプレイ可能なゲームを作成してください。
言語はJavaScriptです。

* プレイフィールドは幅8ブロック、高さ16ブロック
* 落ちてくるのはテトリミノだが、テトリミノを構成する4ブロックは赤、青、緑、黄、紫のいずれかに色分けされている
* 通常のテトリスと同じく、テトリミノは着地した時点で固定される（ぷよぷよのように重力に従ってばらけて落下することは無い）
* 通常のテトリスと同じく、行（ライン）すべてがブロックで埋まったらそのラインのブロックは消去され、上のブロックは消去されたラインの分だけ下がる（ライン消去と呼ぶ）
* ライン消去が発生した場合、消去したライン数に応じて、以下の基本点数が与えられる
* 1ライン消去（シングル）: 100点
* 2ライン消去（ダブル）: 300点
* 3ライン消去（トリプル）: 500点
* 4ライン消去（テトリス）: 800点
* 通常のテトリスのルールに加えて、ぷよぷよのように同じ色のブロックが4つ以上つながった場合、つながったブロックは消去される（ぷよ消去と呼ぶ）
* ぷよ消去が発生した場合、消去したぷよの数×10点の基本点数が与えられる
* ライン消去とぷよ消去の条件を同時に満たした場合は、ライン消去を優先する
* ライン消去が発生した場合、次のテトリミノが出てくる前にぷよ消去の発生判定が行われる
* ぷよ消去が起きた場合、ぷよ消去された全ブロックと同じ列の上のブロックすべてが1つのテトリミノであるかのように落下する。その後、ライン消去チェックが行われ、その後にぷよ消去チェックが行われる。
* ライン消去またはぷよ消去が連続で発生（連鎖）した場合、2^(連鎖数-1乗)の係数が基本点数に乗算される。
* 例えば、1ライン消去→4ぷよ消去→2ライン消去、8ぷよ消去と連鎖した場合は、1ライン消去で100点、4ぷよ消去に2連鎖で40*2^1=80点、2ライン消去に3連鎖で300*2^2=1200点、8ぷよ消去に4連鎖で80*2^3=640点となる。

不明点があれば質問してください。


ぷよ消去後の落下処理について誤解があるようなので説明します。
現在の実装では全ての列（for (let x = 0; x < WIDTH; x++)）で落下するようになっていますが、落下するのは消去されたぷよと同じ列のブロックだけです。
そのため、dropBlocks関数は消去された各ぷよの座標を引数として受け取る必要があります。
消去されたいずれかのぷよと同じ列であり、かつ消去されたいずれかの同じ列のぷよより高い位置にある各ブロックについて、1マスずつ落下していきます。
落下したブロックのうちいずれかがプレイフィールドの底または落下していない別のブロックとぶつかった時点で、全ブロックの落下が止まります。


スマートフォンでも操作できるように、上下左右のボタンを追加してください。


追加されたボタンは、PCでクリックしても動作しますか？


スコアとプレイフィールドを左寄せではなく画面の中央にセンタリングしてください。
「↑」ボタンを「Rotate」ボタンに変更してください。
「Dropボタン」を削除してください。

